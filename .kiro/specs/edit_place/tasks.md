# タスク

- [x] 1. 更新/削除APIの基盤を追加する
- [x] 1.1 ルーティングに update/destroy を追加する
  - `PATCH /api/places/:id` と `DELETE /api/places/:id` を追加する
  - _Requirements: 2.1, 2.3_

- [x] 1.2 更新APIのコントローラ処理を実装する
  - `place.update(place_params)` で更新し成功時は JSON を返す
  - バリデーションエラーは 422 を返す
  - URL 重複は 409 + `existing_place_id` を返す（自分自身は除外）
  - _Requirements: 2.1, 3.1, 3.3_

- [x] 1.3 削除APIのコントローラ処理を実装する
  - `destroy` 成功時は 204 を返す
  - _Requirements: 2.3, 5.2_

- [x] 1.4 404/例外ハンドリングを追加する
  - `ActiveRecord::RecordNotFound` を捕捉し 404 を返す
  - _Requirements: 3.4, 2.5_

- [ ] 2. フロントエンドのAPI連携を追加する
- [ ] 2.1 更新/削除 API クライアントを追加する
  - `updatePlace(placeId, payload)` を追加する
  - `deletePlace(placeId)` を追加する
  - _Requirements: 2.1, 2.3_

- [ ] 2.2 更新/削除のエラー型を整備する
  - 409/422/404 を判別できる戻り値にする
  - _Requirements: 2.5, 3.4_

- [ ] 3. 編集画面と導線を実装する
- [ ] 3.1 編集画面を追加する
  - 既存値を初期表示する（`null` → 空文字）
  - 「更新する」で保存できる
  - _Requirements: 2.1, 2.2, 4.1, 4.3_

- [ ] 3.2 詳細画面の導線を更新する
  - 右側アクションを「編集」「削除」に変更する
  - 見出しを「店舗詳細」に変更しキャプションは省略可能とする
  - _Requirements: 1.3, 2.4_

- [ ] 3.3 削除の確認ダイアログを実装する
  - 確認後に削除 API を呼び出す
  - 失敗時のエラー表示と再試行導線を提供する
  - _Requirements: 2.3, 2.5, 4.2, 6.2_

- [ ] 3.4 編集/削除後の遷移を実装する
  - 更新成功時は `/places/:id` に遷移する
  - 削除成功時は `/places` に遷移する
  - _Requirements: 2.4, 7.1, 7.4_

- [ ] 4. テストで編集/削除を担保する
- [ ] 4.1 バックエンドの更新/削除を検証する（RSpec）
  - 更新成功、422（必須/URL不正）、409（重複）、404（対象なし）を確認する
  - 削除成功、404（対象なし）を確認する
  - テストコメントに「概要」「目的」を含める
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 7.1, 7.2, 7.3, 7.5_

- [ ] 4.2 フロントエンドの編集/削除を検証する（frontend/tests）
  - 初期値表示、バリデーションエラー、重複エラー導線を確認する
  - 更新成功で詳細に遷移、削除成功で一覧に遷移を確認する
  - 取得/削除失敗時のエラー表示を確認する
  - テストコメントに「概要」「目的」を含める
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 4.1, 4.2, 4.3, 7.1, 7.4_
