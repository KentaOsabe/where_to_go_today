# 設計レビュー（validate-design）

## 結論
- 要件の方向性（自由記述入力・生成AIによる全候補選定・スコア廃止）に沿った設計になっており、実装へ進められる。
- 先に指摘した補足点（必須入力、入力保持、理由反映、スコア廃止方針）は設計に追記済み。

## 要件→設計の対応
- Req 1（目的）: 自由記述入力と最大5件提示の流れで対応済み。
- Req 2（機能）: 登録済みのみ対象、同一画面フロー、最大5件提示、スコア廃止で対応済み。
- Req 2.7/2.8: 登録・編集画面に「行った理由」追加、「次も同条件なら行くか」はUIに含めない方針で対応済み。
- Req 3（条件入力）: 自由記述1項目・必須入力の設計で対応済み。
- Req 4（提案ロジック）: 全件候補 + 生成AIで最大5件、失敗時はエラー返却で対応済み。
- Req 5（理由表示）: 生成AI理由を表示する設計で対応済み。
- Req 6（画面/操作）: 同一画面、ローディング、失敗時再試行、0件案内は設計でカバー。
- Req 7（データ要件）: `visit_reason` を主要入力としてAIに渡す設計で対応済み。
- Req 8（非機能）: 体感速度・入力保持の方針は設計で未明記。
- Req 9（受け入れ基準）: テスト方針の記載あり。

## ギャップ/懸念
- 現時点では重大なギャップは見当たらない。

## 仕様上の判断
- フォールバック廃止（OpenAI 失敗時は 500）を採用しており、要件の「失敗時はエラー表示・再試行」に合致。
- 候補の並び順を `updated_at` 降順で固定する設計は妥当だが、AI入力の順序が選定に影響する可能性があるため留意。

## 次のアクション
- 設計承認後、タスク分解（`/kiro:spec-tasks decide_today_for_ai`）へ進む。
